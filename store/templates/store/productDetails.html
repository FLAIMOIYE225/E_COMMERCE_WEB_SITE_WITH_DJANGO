{% extends 'base.html' %}

{% load counter %}
{% load mathFilters %}

{% block content %}

    <!----------------- Single Product details --------------------------->

    <div class="small-container single-product">

        <div class="row">

            <div class="col-2">

                <img src="{{product.thumbnail.url}}" width=100% alt="" id="ProductImg">

                <div class="small-img-row">

                    <div class="small-img-col">
                        <img src="images/gallery-1.jpg" class="small-img" width=100% alt="">
                    </div> 

                    <div class="small-img-col"> 
                        <img src="images/gallery-2.jpg" class="small-img" width=100% alt="">
                    </div> 

                    <div class="small-img-col"> 
                        <img src="images/gallery-3.jpg" class="small-img" width=100% alt="">
                    </div> 

                    <div class="small-img-col"> 
                        <img src="images/gallery-4.jpg" class="small-img" width=100% alt="">
                    </div> 

                </div>
            
            </div>

            <div class="col-2">

                <p>Home / {{product.category.name}}</p>

                <h1>{{product.name}}</h1>

                <h4>$ {{product.price}} </h4>

                <select>

                    <option>Select size</option>
                    <option>XXL</option>
                    <option>XL</option>
                    <option>Large</option>
                    <option>Medium</option>
                    <option>Small</option>

                </select>

                <input type="number" value="1">

                <a href="{% url 'add_to_cart' product.slug %}" class="btn">Add To Cart</a>

                <h3>Product Details <i class="fa fa-indent"></i> </h3>

                <br>

                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Natus commodi nobis rerum nisi itaque incidunt atque dignissimos. Reprehenderit maxime ipsa, quas harum enim natus ut a qui, ea possimus cupiditate.</p>

            </div>

        </div>

    </div>



    <!----------------- title --------------------------->

    <div class="small-container">

        <div class="row row-2">

            <h2>Related Products</h2>

            <p>View More</p>

        </div>

    </div>



    <!----------------- Products --------------------------->

    <div class="small-container">
        
        <div class="row">

            {% for relatedProduct in relatedProducts  %}

                <div class="col-4">
                    <a href="{% url 'details' relatedProduct.slug relatedProduct.category.id relatedProduct.id %}"><img src="{{ relatedProduct.thumbnail.url }}" alt="{{ relatedProduct.name }}"></a>
                
                    <h4>{{ relatedProduct.name }}</h4>

                    <div class="rating">

                        <!-- Font awesome icons : https://fontawesome.com/v4/icons/ -->

                        {% for i in 5|times %}
                            {% if i < relatedProduct.rating %}
                                <i class="fa fa-star"></i>
                            {% else %}
                                <i class="fa fa-star-o"></i>
                            {% endif %}
                        {% endfor %}

                    </div>

                    <p>$ {{relatedProduct.price}}</p>  
                </div>

            {% endfor %}

        </div>

    </div>

    <script>
        /*
        // Sauvegarder la position avant de quitter ou de recharger
        window.addEventListener("beforeclick", function () {
            localStorage.setItem("scrollPosition", window.scrollY);
        });
    
        // Restaurer la position apr√®s le chargement
        window.addEventListener("load", function () {
            const scrollPosition = localStorage.getItem("scrollPosition");
            if (scrollPosition) {
                window.scrollTo(0, scrollPosition);
            }
        });
        */
    </script>
    

{% endblock %}